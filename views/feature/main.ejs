<link rel="stylesheet" href="/src/css/main.css">

<!-- 모달 예시
<div class="modal fade" id="studentCard" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog mx-auto">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title font-c">Modal 제목 적는 곳</h5>
      </div>
      <div class="modal-body font-n">
        모달 본문 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-white font-c" data-bs-dismiss="modal">닫기</button>
        <button type="button" class="btn btn-primary font-c">확인</button>
      </div>
    </div>
  </div>
</div>
-->

<div class="modal fade" id="studentCard" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog mx-auto">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title font-c">학생증 / 도서대출증</h5>
      </div>
      <div class="modal-body font-n d-flex flex-column">
        <div class="bg-colored card-top greyborder-b">
          <h1 class="font-c text-center">학생증</h1>
        </div>
        
        <div class="card-main d-flex flex-column bg-light">
          <h5 class="font-c">
            <%- schnum.grade %>학년 <%- schnum.class %>반 <%- schnum.num %>번
          </h5>
          <h2 class="font-c">
            <%- stdname %>
          </h2>
          <p class="txt-sm text-secondary">본 학생은 본교의 학생임을 증명함</p>
          <p class="txt-sm text-secondary mb-2">도서대출 / 제휴서비스 등에 사용가능</p>
          <div class="mb-3">
            <span class="status bg-green font-n">유효기간</span>
            <% if(barcode != 'Failed') { %>
              <span class="status bg-green font-n">등록여부</span>
            <% } else { %>
              <span class="status bg-red font-n">등록여부</span>
            <% } %>
            
          </div>

          <div class="card-barcode mt-auto bg-white border-a">
            <% if(barcode != 'Failed') { %>
              <img src='https://barcode.tec-it.com/barcode.ashx?data=<%- barcode %>&code=Code128&multiplebarcodes=false&translate-esc=true&unit=Fit&dpi=100&imagetype=Gif&rotation=0&color=%23000000&bgcolor=%23ffffff&codepage=Default&qunit=Mm&quiet=0&hidehrt=True&modulewidth=100' class="barcode">
            <% } else { %>
              <img src="../../src/img/icon/barcodeFalse.png" class="barcode">
            <% } %>
          </div>

        </div>

        <div class="bg-white card-bottom mt-auto d-flex greyborder-t">
          <img src="/src/img/areumgo-logo.png" class="schicon">
          <h4 class="font-c schtext flex-grow-1">아름고등학교</h4>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-white font-c" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="barcodereader" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
	aria-labelledby="barcodereaderLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title font-c">바코드 스캔</h5>
			</div>
			<div class="modal-body d-flex flex-column">
				<div id="scanner-container" class="cambox align-self-center"></div>
				<p class="font-n align-self-center">학생증의 바코드를 스캔해주세요.</p>
			</div>
			<form id="UDTbarcode" class="modal-footer" action="test" method="POST">
        <input name="barcode" type="text" class="disable">
        <button type="submit" class="btn btn-primary font-c" onclick="cam()">제출</button>
				<button type="button" class="btn btn-white font-c" data-bs-dismiss="modal" onclick="cam()">닫기</button>
      </form>
		</div>
	</div>
</div>

<div class="container">
  <div class="row row-cols-1 row-cols-lg-12 flex-row-reverse padd min-vh-100">

    <div class="col col-lg-4 d-flex flex-column divider divided-t">
      <div class="mb-3 square border-a r4">
        <div id="imgslide" class="carousel r4 bg-black slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active"> <img src="/src/img/banner/1.png" class="d-block w-100 slideimg"> </div>
            <div class="carousel-item"> <img src="/src/img/banner/2.png" class="d-block w-100 slideimg"> </div>
          </div>
          <button class="carousel-control-prev" data-bs-target="#imgslide" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" data-bs-target="#imgslide" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
        </div>
      </div>

      <div class="mt-3 p-4 flex-grow-1 bg-white border-a r4">
        <h1 class="font-c mb-3">공지사항</h1>
        <ul class="notice">
          <li><a href="https://blog.koderpark.dev/203">아름인 길라잡이</a></li>
          <li><a href="https://open.kakao.com/me/koderpark">버그 제보 / 문의 링크</a></li>
          <% if(barcode == 'Failed') { %>
            <li><button type="button" class="font-n" data-bs-toggle="modal" data-bs-target="#barcodereader" onclick="cam()">바코드 등록은 여기서</button></li>
          <% } %>
        </ul>
      </div>
    </div>

    <div class="col col-lg-8 d-flex flex-column p-0 divided-b">
      <div class="mb-3 p-4 w-100 bg-white border-a r4 align-self-start">
        <div>
          <h1 class="font-c mb-3">서비스</h1>
          <div class="row row-cols-3 row-cols-lg-6 font-n">
            <div class="col"><a class="btn-service tt" href="/meal" title="급식"><img class="img-btn"
                  src="/src/img/service/meal.png"></a></div>
            <div class="col"><a class="btn-service tt" href="/time" title="시간표"><img class="img-btn"
                  src="src/img/service/time.png"></a></div>
            <div class="col"><a class="btn-service tt" href="/shop" title="제휴"><img class="img-btn"
                  src="/src/img/service/shop.png"></a></div>

            <div class="col"><a class="btn-service tt" href="/calendar" title="학사일정"><img class="img-btn"
                  src="/src/img/service/todo.png"></a></div>
            <!--<div class="col"><a class="btn-service tt" href="#" title="시험/수행" onclick="nextversion()"><img class="img-btn" src="/src/img/service/pencil.png"></a></div>-->
            <div class="col"><a class="btn-service tt" href="https://hjpyo.github.io/RandomSeqGenerator/main"
                title="대포뽑기" target="_blank"><img class="img-btn" src="/src/img/service/cannon.png"></a></div>

            <!--<div class="col"><a class="btn-service tt" href="#" title="커뮤니티" onclick="nextversion()"><img class="img-btn" src="/src/img/service/comu.png"></a></div>-->
            <!--<div class="col"><a class="btn-service tt" href="#" title="날씨" onclick="nextversion()"><img class="img-btn" src="/src/img/service/weather.png"></a></div>-->
            <div class="col"><a class="btn-service tt cursor" title="학생증" onclick="studentCard.show()"><img
                  class="img-btn" src="/src/img/service/idcard.png"></a></div>
          </div>
        </div>
      </div>

      <div class="my-3 w-100 align-self-start d-flex flex-lg-row flex-column">
        <!--
        <div class="p-4 h-100 bg-white border-a r4 align-self-lg-start divided-l w-100">
          <h1 class="font-c mb-3">날씨</h1>
          <div class="row row-cols-1 row-cols-lg-2 m-0">
            <div class="col p-0">
              <div class="bg-red maxsizer square r3">
                <div class="w-100 h-100 p-3">
                  <img class="w-100" src="/src/img/service/weather.png">
                </div>
              </div>
            </div>
            <div class="col">
              <h4>구름</h4>
              <p>온도 1e9도</p>
              <p>강수확률 K%</p>
              <p>미세먼지 방독면필요</p>
            </div>
          </div>
        </div>
-->
        <div class="p-4 h-100 bg-white border-a r4 align-self-lg-end w-100">
          <h1 class="font-c mb-3">급식</h1>
          <div class="row row-cols-1 row-cols-lg-2 d-flex justify-content-evenly">
            <div class="p-3">
              <h3 class="font-c col-2 col-lg-1 w-100">중식</h3>
              <%- ml %>
            </div>
            <div class="p-3">
              <h3 class="font-c col-2 col-lg-1 w-100">석식</h3>
              <%- md %>
            </div>
          </div>
        </div>

      </div>


      <div class="mt-3 p-4 w-100 bg-white border-a r4 flex-grow-1 d-flex flex-column">
        <h1 class="font-c mb-3" style="left: 0;">시간표</h1>
        <div class="h-100">
          <div class="row row-cols-1 row-cols-lg-7 m-0 text-center h-100">
            <% for(var i = 0; i < 7; i++){ %>
              <% if(i != 999) { %>
              <div class="col p-3 r3">
                <p><%- i + 1 %>교시</p>
                <h5><%- time[i] %></h5>
              </div>
              <% } else { %>
              <div class="col p-3 r3 bg-colored">
                <p><%- i + 1 %>교시</p>
                <h5><%- time[i] %></h5>
              </div>
            <% }} %>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>

<script src="https://unpkg.com/@popperjs/core@2"></script>

<script>
  var tooltipTriggerList = [].slice.call(document.querySelectorAll('.tt'));
  var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl, { placement: 'bottom' });
  });

  var studentCard = new bootstrap.Modal(document.getElementById('studentCard'));
</script>
<script src="/src/lib/quagga.min.js"></script>
<script src="/src/js/main.js"></script>